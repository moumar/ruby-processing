--- processing-1.5.1/core/src/processing/core/PApplet.java	2011-05-15 19:02:53.000000000 +0200
+++ ../processing-1.5.1/core/src/processing/core/PApplet.java	2011-09-25 19:44:19.000000000 +0200
@@ -1611,7 +1611,18 @@
         } catch (RendererChangeException e) {
           // Give up, instead set the new renderer and re-attempt setup()
           return;
+
+        // Catch a JRuby exception so that the RendererChangeExceptions
+        // that we're looking for don't get stuck in Ruby-space.
+        } catch (RuntimeException e) {
+          if(e.getCause() instanceof RendererChangeException) {
+            // Give up, instead set the new renderer and re-attempt setup()
+            return;
+          } else {
+            throw e;
+          }
         }
+        
         this.defaultSize = false;
 
       } else {  // frameCount > 0, meaning an actual draw()
